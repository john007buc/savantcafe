{% extends 'JohnProfileBundle::profile_layout.html.twig' %}
{% block main %}


    <div class="articles-header">

        {{ include('JohnArticleBundle:Article:filter.html.twig',{'form':filter_form}) }}

    </div>


    {% for article in articles %}

        <article>
           <h2><a href="{{ path('article_show',{id:article.id}) }}">{{ article.title }}</a></h2>
            {% if article.featuredImage %}
                <figure >
                   <img  alt="{{ article.featuredImage.alt }}" src="{{ asset(('uploads/featured_images/'~article.featuredImage.name)| imagine_filter('my_thumb'),'cdn')}}">
                </figure>
            {% endif %}

           <div class="truncate-content">
               {{ article.content|truncate(550)|striptags }}
           </div>
            <footer {% if article.active == false %} style="color:red" {% endif %}>
                <span class="genericon genericon-category">{{ article.categories[0] }}</span>
                 {% if article.published ==false  %}
                     <span class="genericon genericon-show">Unpublished</span>

                 {% else %}
                     <span class="genericon genericon-edit">Published</span>
                 {% endif %}
                <span class="genericon genericon-user">Author:{{ article.author.firstName~' '~article.author.lastName }}</span>, <span class="genericon genericon-time">Created: {{ article.created|date("m/d/Y") }},Updated: {{ article.updated|date("m/d/Y") }}</span>
            </footer>
        </article>
    {% endfor %}

    {{ pagination_links|raw }}
{% endblock %}

 {% block javascripts %}
     {{ parent() }}
     {% javascripts 'bundles/johnarticle/js/filter_articles.js' filter="uglifyjs"%}
     <script type="text/javascript" src="{{ asset_url }}"></script>
     {% endjavascripts %}
{% endblock %}